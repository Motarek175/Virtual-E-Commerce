import{a as B}from"./chunk-WQ74LAME.js";import{a as D,b as f,c as N,d as A,e as L,f as h,h as T,k as U,l as j,u as G}from"./chunk-GFUF5DTM.js";import{j as k,k as R,n as P,o as M}from"./chunk-HD3FFQXR.js";import{h as C,j as I,q as E}from"./chunk-MMZLANRT.js";import{Bb as F,Fa as d,Fb as b,Ga as v,Ta as p,Va as u,_ as S,bb as r,cb as i,db as c,e as w,kb as y,lb as x,tb as l}from"./chunk-4Z7TEFED.js";var O=w(P());var _=w(B());var q=(o,a,t)=>({"border-2 border-[#a14b4b]":o,"border-2 border-red-500":a,"border-2 border-gray-200":t});function Y(o,a){o&1&&(r(0,"p",22)(1,"span",23),l(2,"\u2718"),i(),l(3," Email is required "),i())}function z(o,a){o&1&&(r(0,"p",22)(1,"span",23),l(2,"\u2718"),i(),l(3," Enter a valid email "),i())}function H(o,a){if(o&1&&(r(0,"div",20),p(1,Y,4,0,"p",21)(2,z,4,0,"p",21),i()),o&2){let t,e,n=x();d(),u("ngIf",!((t=n.loginForm.get("email"))!=null&&t.value)),d(),u("ngIf",((e=n.loginForm.get("email"))==null?null:e.hasError("email"))&&((e=n.loginForm.get("email"))==null?null:e.value))}}function J(o,a){o&1&&(r(0,"p",22)(1,"span",23),l(2,"\u2718"),i(),l(3," Password is required "),i())}function K(o,a){if(o&1&&(r(0,"div",20),p(1,J,4,0,"p",21),i()),o&2){let t,e=x();d(),u("ngIf",!((t=e.loginForm.get("password"))!=null&&t.value))}}var V=class o{constructor(a,t){this._Router=a;this._UserAuthService=t}loginForm=new L({email:new h("",[f.required,f.email]),password:new h("",[f.required])});ngOnInit(){this._UserAuthService.isUserLogin.getValue()&&this._Router.navigate(["/home"])}login(){let a={email:this.loginForm.get("email")?.value||"",password:this.loginForm.get("password")?.value||""};this._UserAuthService.login(a).subscribe({next:t=>{let n=(0,O.jwtDecode)(t.token).Role;localStorage.setItem("token",t.token),this._UserAuthService.isUserLogin.next(!0);let m;switch(n){case"Customer":m="/home";break;case"Admin":m="/adminDashboard";break;case"DeliveryRep":m="/deliveryDashboard";break;case"Merchant":m="/merchantDashboard";break;default:m="/home"}_.default.fire({title:"Login Successful",text:"You have been logged in successfully",icon:"success",showConfirmButton:!0}).then(()=>{this._Router.navigate([m])})},error:t=>{_.default.fire({icon:"error",title:"Login Failed",text:t.error.message||"Invalid email or password"})}})}static \u0275fac=function(t){return new(t||o)(v(k),v(M))};static \u0275cmp=S({type:o,selectors:[["app-sign-in"]],standalone:!0,features:[F],decls:29,vars:14,consts:[[1,"mx-auto","px-4","py-8","sm:px-6","lg:px-8","bg-gradient-to-br","from-[#703232]/10","via-[#a14b4b]/10","to-[#703232]/10","animate-gradient"],[1,"flex","justify-center","gap-14","mitems-center","max-w-7xl","h-[450px]"],[1,"img","hidden","md:block","relative"],["src","./assets/image.png","alt","Login Illustration","loading","eager",1,"h-full","object-cover","rounded-2xl","shadow-2xl","transform","transition-transform","duration-300"],[1,"flex","flex-col","justify-center","bg-white/10","backdrop-blur-lg","p-8","rounded-2xl","shadow-2xl","sm:max-w-md","w-full","form-container","border","border-white/20"],[1,"sm:mx-auto","sm:w-full"],[1,"text-4xl","font-extrabold","text-gray-900","text-center","bg-clip-text","text-transparent","bg-gradient-to-r","from-[#703232]","to-[#a14b4b]"],[1,"mt-2","text-base","text-gray-700","text-center"],[1,"mt-6","sm:mx-auto","sm:w-full"],[1,"flex","flex-col","gap-6",3,"ngSubmit","formGroup"],["type","email","placeholder","Email Address","formControlName","email",1,"appearance-none","block","w-full","px-4","py-3","bg-white/50","rounded-xl","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-4","focus:ring-[#a14b4b]/50","transition-all","duration-300","shadow-md",3,"ngClass"],["class","mt-2 text-sm",4,"ngIf"],["type","password","autocomplete","current-password","placeholder","Password","formControlName","password",1,"appearance-none","block","w-full","px-4","py-3","bg-white/50","rounded-xl","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-4","focus:ring-[#a14b4b]/50","transition-all","duration-300","shadow-md",3,"ngClass"],[1,"text-md"],["routerLink","/forget-email",1,"font-medium","text-[#703232]","hover:text-[#5b2929]","transition-colors","duration-200","block","text-right"],[1,"flex","justify-end"],[1,"w-full","flex","cursor-pointer","justify-center","py-4","px-8","border","border-transparent","text-xl","font-bold","rounded-xl","text-white","bg-gradient-to-r","from-[#703232]","to-[#a14b4b]","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"text-center"],[1,"text-gray-700"],["routerLink","/signup",1,"text-[#703232]","font-bold","hover:text-[#5b2929]","underline","transition-colors","duration-200"],[1,"mt-2","text-sm"],["class","text-red-500",4,"ngIf"],[1,"text-red-500"],[1,"inline-block","w-4"]],template:function(t,e){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),c(3,"img",3),i(),r(4,"div",4)(5,"div",5)(6,"h2",6),l(7," Log in to Exclusive "),i(),r(8,"p",7),l(9," Enter your details below "),i()(),r(10,"div",8)(11,"form",9),y("ngSubmit",function(){return e.login()}),r(12,"div"),c(13,"input",10),p(14,H,3,2,"div",11),i(),r(15,"div"),c(16,"input",12),p(17,K,2,1,"div",11),i(),r(18,"div",13)(19,"a",14),l(20," Forgot your password? "),i()(),r(21,"div",15)(22,"button",16),l(23," Login "),i()(),r(24,"div",17)(25,"p",18),l(26," Don't have an account? "),r(27,"a",19),l(28," Sign up "),i()()()()()()()()),t&2){let n,m,s,g;d(11),u("formGroup",e.loginForm),d(2),u("ngClass",b(6,q,((n=e.loginForm.get("email"))==null?null:n.valid)&&((n=e.loginForm.get("email"))==null?null:n.touched),((n=e.loginForm.get("email"))==null?null:n.invalid)&&((n=e.loginForm.get("email"))==null?null:n.touched),!((n=e.loginForm.get("email"))!=null&&n.touched))),d(),u("ngIf",((m=e.loginForm.get("email"))==null?null:m.invalid)&&((m=e.loginForm.get("email"))==null?null:m.touched)),d(2),u("ngClass",b(10,q,((s=e.loginForm.get("password"))==null?null:s.valid)&&((s=e.loginForm.get("password"))==null?null:s.touched),((s=e.loginForm.get("password"))==null?null:s.invalid)&&((s=e.loginForm.get("password"))==null?null:s.touched),!((s=e.loginForm.get("password"))!=null&&s.touched))),d(),u("ngIf",((g=e.loginForm.get("password"))==null?null:g.invalid)&&((g=e.loginForm.get("password"))==null?null:g.touched)),d(5),u("disabled",!e.loginForm.valid)}},dependencies:[R,E,C,I,G,T,D,N,A,U,j]})};export{V as SignInComponent};
